<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>How to Pass Value in ES6 - Learn ES6</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
        crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" media="screen" href="../style.css" />
    <link rel="shortcut icon" href="../../logo-black.png">
</head>
<body>
    <main>
        <h1>Understanding ES6</h1>
        <h2>Promises</h2>
        <div class="section">
            <h3>Fundamentals of Promise</h3>
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Using_promises">See the Reference</a>
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">See also</a>
            <p>
                Promiseã¨ã¯ã€ç¾æ™‚ç‚¹ã§çµæœãŒã‚ã‹ã‚‰ãªã„å€¤ã«å¯¾ã—ã¦çµæœã‚’ä»®æ±ºå®šã•ã›ã‚‹å‡¦ç†ã®ã“ã¨ã€‚<br>
                æœªæ¥ã®ã‚ã‚‹æ™‚ç‚¹ã§ç¢ºå®šã™ã‚‹ã§ã‚ã‚ã†å€¤ã‚’Promiseã‚’ä½¿ã£ã¦ä»®ã§æ±ºå®šã—ã¦ãŠãã“ã¨ã§ã€PHPãªã©ã®åŒæœŸå‡¦ç†ã¨åŒã˜ã‚ˆã†ã«ç‰¹å®šã®ã‚³ãƒ¼ãƒ‰ãŒå‡¦ç†ã•ã‚Œã‚‹ã®ã‚’å¾…ã£ã¦ã‹ã‚‰å¾…ã£ã¦ã‹ã‚‰æ¬¡ã®ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã§ãã‚‹ã€‚(*node.jsã®å‡¦ç†ã¯åŸºæœ¬çš„ã«éåŒæœŸå‡¦ç†ã®ãŸã‚Promiseã‚’ä½¿ã‚ãªã„ã¨ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚’å»¶ã€…ã¨ç¹°ã‚Šè¿”ã™ã“ã¨ã«ãªã‚‹)<br>
                Promiseã¯ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã‚ã‚Šã€æ¬¡ã®æ§‹æ–‡ã§å®šç¾©å¯èƒ½ã€‚
                <pre class="prettyprint">
                <code>
                new Promise((resolve, reject)=>{
                    //å‡¦ç†
                });</code>
                </pre>  
            </p>
            <p>Promiseã«ä½¿ç”¨ã•ã‚Œã‚‹ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ã¯ï¼’ã¤ã®é–¢æ•°ã‚’parameterã«ã¨ã‚‹ã€‚
                    <li><strong>resolve</strong> - å‡¦ç†ãŒ<strong>æˆåŠŸã—ãŸã‚‰</strong>çµæœã‚’æ¬¡ã®é–¢æ•°ã«æ¸¡ã™</li>
                    <li><strong>reject</strong>- å‡¦ç†ãŒ<strong>å¤±æ•—ã—ãŸã‚‰</strong>çµæœã‚’æ¬¡ã®é–¢æ•°ã«æ¸¡ã™</li>
                </ul>
                <span class="caption">*å®Ÿéš›ã«ã¯resolveã¨rejectã¯æ…£ä¾‹ã¨ã—ã¦ä½¿ã‚ã‚Œã‚‹ã‚‚ã®</span>
            </p>
            <p>Promiseå†…ã® resolve ã‚„ reject ãŒå®Ÿéš›ã«å‘¼ã³å‡ºã•ã‚Œã‚‹ã¨ã€çµæœã«å¿œã˜ then ã‚„ catch ãƒãƒ³ãƒ‰ãƒ©ãŒå‘¼ã³å‡ºã•ã‚Œã‚‹
                <pre class="prettyprint">
                <code>
                const promise = new Promise((resolve, reject) => {
                    //å‡¦ç†
                });
                Promise
                    .then((result) => {
                        //æˆåŠŸã—ãŸæ™‚ã®å‡¦ç†
                    })
                    .catch((result) => {
                        //å¤±æ•—ã—ãŸæ™‚ã®å‡¦ç†
                    })
                </code>
                </pre>
            </p>
            <p>PromiseãŒæŒã¤ä»¥ä¸‹ã®çŠ¶æ…‹ã¨ã€ãã®çŠ¶æ…‹ãŒã©ã†å¤‰åŒ–ã™ã‚‹ã‹ã«ã¤ã„ã¦ç†è§£ã™ã‚‹ã“ã¨ãŒPromiseã®è¦ã€‚</p>
            <ul>
                <li><strong><code>pending</code></strong> - åˆæœŸçŠ¶æ…‹ã€‚çµæœã¯æœªç¢ºå®š</li>
                <li><strong><code>fulfilled</code></strong> - å‡¦ç†ãŒæˆåŠŸã—ãŸçŠ¶æ…‹(Promiseã¯å€¤ã‚’1ã¤æŒã¤)</li>
                <li><strong><code>rejected</code></strong> - å‡¦ç†ãŒå¤±æ•—ã—ãŸçŠ¶æ…‹</li>
            </ul>
            <ol>
                <li>Promiseã¯å®šç¾©ã•ã‚Œã‚‹æ™‚ã¯<code>Pending</code>ã€‚</li>
                <li>resolve ã‚„ reject ãŒå‘¼ã³å‡ºã•ã‚ŒãŸæ™‚ã«ã€
                    <ul>
                        <li>å‡¦ç†ãŒæˆåŠŸã—ã¦ã„ãŸã‚‰ã€<code>fulfilled</code></li>
                        <li>å‡¦ç†ãŒå¤±æ•—ã—ã¦ã„ãŸã‚‰ã€<code>rejected</code></li>
                    </ul>
                </li>
                <li>çŠ¶æ…‹ãŒç¢ºå®šã—ãŸPromiseã¯çµæœã«å¿œã˜ã¦ã¯çµæœã«å¿œã˜ã¦<code>then</code>ã‚„<code>catch</code>ãƒãƒ³ãƒ‰ãƒ©ã‚’å‘¼ã³å‡ºã™</li>
            </ol>
            <img src="https://codeprep-prod.s3-ap-northeast-1.amazonaws.com/books/shliumlE87CNvzTuxH1lJlJmbGv-Cjo-Jm1A-623eRQ/es6/a4dc3fb8d19e8e90d3f14ea8be71418c027b0601/assets/images/images.001.png"/>
            <h4>input</h4>
            <pre class="prettyprint">
            <code>
            const promise = new Promise((resolve, reject) =>{
                /* 
                    â–³
                    resolve - å‡¦ç†ãŒæˆåŠŸã—ãŸã‚‰çµæœã‚’æ¬¡ã®é–¢æ•°ã«æ¸¡ã™
                    reject - å‡¦ç†ãŒå¤±æ•—ã—ãŸã‚‰çµæœã‚’æ¬¡ã®é–¢æ•°ã«æ¸¡ã™
                */
            //å‡¦ç†ãŒæˆåŠŸã—ãŸå ´åˆã®çµæœã‚’100mså¾Œã«è¿”ã™
            setTimeout(() => {
                resolve("one")
                }, 100);
            });
            promise.then(data => {
                //resolveã®å‡¦ç†ãŒå®Ÿéš›ã«æˆåŠŸã™ã‚‹ã¨thenã«ãã®ãƒ‡ãƒ¼ã‚¿ãŒæ¸¡ã•ã‚Œã‚‹
                console.log(data);//one(in resolve)
            });
            </code>
            </pre>
            <h4>output</h4>
            <pre>
            <code>
            one</code>
            </pre>
        </div>
        <div class="section">
            <h3>Promiseã®ãƒã‚§ã‚¤ãƒ³(é€£çµ)</h3>
            <p>Promiseã®å‡¦ç†ã¯<code>then</code>ã‚’ä½¿ç”¨ã—ã¦é€£çµã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚<br>
                <code>then</code>ã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ãŒå€¤ã‚’è¿”ã—ãŸå ´åˆã€<strong>Promise.resolve</strong>ã§
                ãƒ©ãƒƒãƒ—ã•ã‚Œã‚‹ã®ã§ã€æ¬¡ã®<code>then</code>ã§ãã®å€¤ã‚’å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
            <h4>Input</h4>
            <pre class="prettyprint">
            <code>
            const lunch = new Promise ((resolve, reject) => {
                setTimeout(()=>{
                    resolve("ğŸ”")
                }, 100)
            });
            lunch
                .then(data => {
                console.log(data);
            
                // in case of paprameter in then() erase the value,
                // then() can be chain, thanks to it'll be automatically
                // wrapped by Promise.resolve.
                return `${data}ğŸŸ`;
            })
            .then(data => {
                console.log(data);
                return`${data}ğŸ¥¤`;
            })
            .then(data => {
                console.log(`${data} that's it!`)
            })</code>
            </pre>
            <h4>Output</h4>
            <pre>
            <code>
            ğŸ”
            ğŸ”ğŸŸ
            ğŸ”ğŸŸğŸ¥¤ that's it!</code>
            </pre>
        </div>
        <div class="section">
            <h3>Promise.resolve</h3>
            <p><code>Promise.resolve()</code>ã‚’ä½¿ã†ã“ã¨ã§ã€Promiseã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ç”Ÿæˆã—ãªãã¦ã‚‚ã€çŠ¶æ…‹ãŒç¢ºå®šã—ãŸPromiseã‚’ä½œæˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
            <pre>
            <code>
            // ã“ã‚Œã¨åŒã˜
            const promise = new Promise((resolve, reject) => {
            resolve("You got a API response!!");
            });
            </code>
            </pre>
            <h4>input</h4>
            <pre class="prettyprint">
            <code>
            const promiseResolve = Promise.resolve("You got an API response!");
            
            promiseResolve
            .then(data => {
            console.log("success!", data)
            });
            </code></pre>
            <h4>output</h4>
            <pre>
            <code>
                success! You got an API response!</code>
            </pre>
        </div>
        <div class="section">
            <h3>Promise.reject</h3>
            <p><code>Promise.reject()</code>ã‚’ä½¿ã†ã“ã¨ã§ã€Promiseã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ç”Ÿæˆã—ãªãã¦ã‚‚ã€çŠ¶æ…‹ãŒç¢ºå®šã—ãŸPromiseã‚’ä½œæˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚<br>(Promise.resolveã®å¤±æ•—ãƒ‘ã‚¿ãƒ¼ãƒ³)</p>
            <pre>
            <code>
            // ã“ã‚Œã¨åŒã˜
            const promise = new Promise((resolve, reject) => {
            resolve("You got a API response!!");
            });
            </code>
            </pre>
            <h4>input</h4>
            <pre class="prettyprint">
            <code>
            const promiseReject = Promise.reject("java.lang.NullPointerException");//failed example
            promiseReject
                .then(data => {
                console.log("Sucess!", data);
                })
            .catch(error => {
                console.log("failed!", error);
                });
            </code></pre>
            <h4>output</h4>
            <pre>
            <code>
            failed! java.lang.NullPointerException</code>
            </pre>
        </div>
        

        <div class="section">
            <h3>å‚è€ƒè³‡æ–™</h3>
            <ul>
                <li><a href="https://techracho.bpsinc.jp/hachi8833/2017_11_16/48168">JavaScript: 5åˆ†ã§ã‚ã‹ã‚‹Promiseã®åŸºç¤ï¼ˆç¿»è¨³ï¼‰</a></li>
            </ul>
        </div>
    </main>
    <footer>
        <ul>
            <li><a href="../01-Introduction/index.html">Introduction</a></li>
            <li><a href="../02-Arrow-function/index.html">Arrow funciton</a></li>
            <li><a href="../03-Destructuring/index.html">Destructuring</a></li>
            <li><a href="../04-How-to-pass-value/index.html">How to Pass Value in ES6</a></li>
            <li><a href="../05-Template-Strings/index.html">Template Strings</a></li>
            <li><a href="../06-Expanded-Object-Properties/index.html">Expanded Object Properties</a></li>
            <li><a href="../07-Classes/index.html">Classes</a></li>
            <li>Promises</li>
            <li><a href="../09-New-APIs/index.html">New API</a></li>
        </ul>
        <p class="copyright">&copy;SZDP / Kaai Suzuki</p>
    </footer>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>
    <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>
    <link rel="stylesheet" type="text/css" media="screen" href="../../main.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="../style.css" />
    <script>
        'use strict';
        ///Pt.1
        const promise = new Promise((resolve, reject) =>{
            /*  â–³
                resolve - pass result to next function in case of processing has successed
                reject - pass result to next function in case of processing has unsuccessed
                *normally resolve and reject is used as a name of function
            */
            //return result after 100ms
            setTimeout(() => {
                resolve("one")
            }, 100);
        });
        promise.then(data => {
            /*
                When resolve or reject has been invoked, 
                then or catch handler will be invoke depends on the results.
                
                then - if the result was success
                catch - if the result was unsuccess
            */
            //receive the data which passed by value on resolve
            console.log(data);//one(in resolve)
        });

        ///Pt.3
        const promiseResolve = Promise.resolve("You got an API response!");

        promiseResolve
            .then(data => {
                console.log("success!", data)
            });

        ///Pt.4
        const promiseReject = Promise.reject("java.lang.NullPointerException");//failed example
        promiseReject
            .then(data => {
                console.log("Sucess!", data);
            })
            .catch(error => {
                console.log("failed!", error);
            });
    </script>
</body>
</html>